<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GymRats - Exercises Management</title>
    <link rel="stylesheet" href="/admin/admin.css">
    <link rel="stylesheet" href="/admin/admin_exercises.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap">

</head>
<body>
    <div class="container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="/home" class="brand-name">GymRats</a>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="/admin_dashboard" class="nav-link ">
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/admin_user" class="nav-link">
                        <span>Users</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/admin_trainers" class="nav-link">
                        <span>Trainers</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/admin_membership" class="nav-link">
                        <span>Memberships</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/admin_nutrition" class="nav-link">
                        <span>Nutrition Plans</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/admin_exercises" class="nav-link active">
                        <span>Exercises</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/admin_workouts" class="nav-link">
                        <span>Workout Plans</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/admin_verifier" class="nav-link">
                        <span>Verifiers</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/admin_settings" class="nav-link">
                        <span>Settings</span>
                    </a>
                </li>
            </ul>
        </aside>
        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Header -->
            <div class="header">
                <h2>Exercises Management</h2>
                <div class="right-container">
                    <div class="search-container">
                        <img src="https://img.icons8.com/ios/250/8A2BE2/search--v1.png" height="18px" alt="Search Icon" />
                        <input type="text" placeholder="Search..." size="20" style="font-size: 14px;" />
                    </div>
                    <div class="user-info">
                        <div class="avatar">A</div>
                        <span>Admin</span>
                    </div>
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="stats-container">
                <div class="stats-card">
                    <div class="stats-content">
                        <div class="stats-info">
                            <div class="stats-header">
                                <h3>Total Exercises</h3>
                            </div>
                            <div class="stats-number">478</div>
                            <div class="stats-label">+32 from last month</div>
                        </div>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="stats-content">
                        <div class="stats-info">
                            <div class="stats-header">
                                <h3>Most Popular</h3>
                            </div>
                            <div class="stats-number">Squats</div>
                            <div class="stats-label">8,245 total uses</div>
                        </div>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="stats-content">
                        <div class="stats-info">
                            <div class="stats-header">
                                <h3>Verified Exercises</h3>
                            </div>
                            <div class="stats-number">392</div>
                            <div class="stats-label">82% of total</div>
                        </div>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="stats-content">
                        <div class="stats-info">
                            <div class="stats-header">
                                <h3>Trending This Week</h3>
                            </div>
                            <div class="stats-number">Kettlebell Swings</div>
                            <div class="stats-label">+65% usage</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Section for Exercise Statistics -->
            <div class="section">
                <div class="section-header">
                    <h3 class="section-title">Exercise Analytics</h3>
                </div>
                <div class="charts-grid">
                    <div class="chart-card">
                        <h4>Most Popular Exercises</h4>
                        <div class="chart-container">
                            <canvas id="popularExercisesChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <h4>Exercises by Category</h4>
                        <div class="chart-container">
                            <canvas id="categoryDistributionChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <h4>Exercises Usage Trend</h4>
                        <div class="chart-container">
                            <canvas id="exerciseTrendChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Search Bar -->
            <div class="search-container">
                <div class="search-bar">
                    <input type="text" id="exerciseSearchInput" placeholder="Search exercises by name, category or difficulty...">
                </div>
                <button class="filter-btn" id="filterBtn">Filter Options</button>
            </div>

            <!-- Tab Navigation -->
            <div class="tab-container">
                <button class="tab active" data-tab="all">All Exercises</button>
                <button class="tab" data-tab="strength">Strength</button>
                <button class="tab" data-tab="cardio">Cardio</button>
                <button class="tab" data-tab="flexibility">Flexibility</button>
                <button class="tab" data-tab="balance">Balance</button>
                <button class="tab" data-tab="trending">Trending</button>
                <button class="tab" data-tab="unverified">Unverified</button>
            </div>

            <!-- Exercises Table -->
            <div class="section">
                <div class="table-header">
                    <h3 class="section-title">Exercise Library</h3>
                    <button class="add-btn" id="addExerciseBtn">+ Add New Exercise</button>
                </div>
                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th>Exercise</th>
                                <th>Category</th>
                                <th>Muscle Groups</th>
                                <th>Difficulty</th>
                                <th>Popularity</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="exerciseTableBody">
                            <tr data-exercise-id="1">
                                <td>
                                    <div class="exercise-info">
                                        <div class="exercise-image">
                                            <img src="https://images.unsplash.com/photo-1574680178050-55c6a6a96e0a?q=80&w=1374&auto=format&fit=crop" alt="Squats">
                                        </div>
                                        <div>Barbell Squats <span class="verified-badge">Verified</span> <span class="trending-badge">Trending</span></div>
                                    </div>
                                </td>
                                <td>
                                    <div class="category-tags">
                                        <span class="category-tag">Strength</span>
                                    </div>
                                </td>
                                <td>Quadriceps, Hamstrings, Glutes, Lower Back</td>
                                <td>
                                    <div class="difficulty-indicator">
                                        <div class="difficulty-dot dot-filled"></div>
                                        <div class="difficulty-dot dot-filled"></div>
                                        <div class="difficulty-dot dot-filled"></div>
                                        <div class="difficulty-dot dot-empty"></div>
                                        <div class="difficulty-dot dot-empty"></div>
                                    </div>
                                </td>
                                <td>
                                    <div class="popularity-bar">
                                        <div class="popularity-fill high-popularity" style="width: 98%"></div>
                                    </div>
                                    <span>8,245 uses</span>
                                </td>
                                <td><span class="status active">Active</span></td>
                                <td>
                                    <button class="action-btn view-details">View</button>
                                    <button class="action-btn">Edit</button>
                                </td>
                            </tr>
                            <tr class="detail-row" id="details-1">
                                <td colspan="7">
                                    <div class="detail-content">
                                        <div class="exercise-detail-image">
                                            <img src="https://images.unsplash.com/photo-1574680178050-55c6a6a96e0a?q=80&w=1374&auto=format&fit=crop" alt="Squats">
                                        </div>
                                        <div class="exercise-details">
                                            <h4>Barbell Squats</h4>
                                            <p><strong>Equipment:</strong> Barbell, Squat Rack</p>
                                            <p><strong>Description:</strong> A compound exercise that targets multiple muscle groups, primarily focusing on the lower body. The barbell squat is considered one of the most effective strength-building exercises.</p>
                                            <p><strong>Instructions:</strong></p>
                                            <ol class="instruction-list">
                                                <li>Stand with feet shoulder-width apart, barbell resting on your upper back.</li>
                                                <li>Keep your chest up and back straight.</li>
                                                <li>Bend at the knees and hips to lower your body, as if sitting in a chair.</li>
                                                <li>Lower until thighs are parallel to the ground (or as low as mobility allows).</li>
                                                <li>Push through your heels to return to the starting position.</li>
                                            </ol>
                                            <p><strong>Verified By:</strong> Mark Johnson (Exercise Form Expert)</p>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr data-exercise-id="2">
                                <td>
                                    <div class="exercise-info">
                                        <div>Push-ups <span class="verified-badge">Verified</span></div>
                                    </div>
                                </td>
                                <td>
                                    <div class="category-tags">
                                        <span class="category-tag">Strength</span>
                                        <span class="category-tag">Bodyweight</span>
                                    </div>
                                </td>
                                <td>Chest, Shoulders, Triceps, Core</td>
                                <td>
                                    <div class="difficulty-indicator">
                                        <div class="difficulty-dot dot-filled"></div>
                                        <div class="difficulty-dot dot-filled"></div>
                                        <div class="difficulty-dot dot-empty"></div>
                                        <div class="difficulty-dot dot-empty"></div>
                                        <div class="difficulty-dot dot-empty"></div>
                                    </div>
                                </td>
                                <td>
                                    <div class="popularity-bar">
                                        <div class="popularity-fill high-popularity" style="width: 96%"></div>
                                    </div>
                                    <span>7,890 uses</span>
                                </td>
                                <td><span class="status active">Active</span></td>
                                <td>
                                    <button class="action-btn view-details">View</button>
                                    <button class="action-btn">Edit</button>
                                </td>
                            </tr>
                            <tr class="detail-row" id="details-2">
                                <td colspan="7">
                                    <div class="detail-content">
                                        
                                        <div class="exercise-details">
                                            <h4>Push-ups</h4>
                                            <p><strong>Equipment:</strong> None (Bodyweight)</p>
                                            <p><strong>Description:</strong> A classic bodyweight exercise that builds upper body strength, particularly in the chest, shoulders, and arms. Push-ups also engage the core for stability.</p>
                                            <p><strong>Instructions:</strong></p>
                                            <ol class="instruction-list">
                                                <li>Start in a plank position with hands slightly wider than shoulder-width.</li>
                                                <li>Keep your body in a straight line from head to heels.</li>
                                                <li>Lower your body by bending your elbows until your chest nearly touches the floor.</li>
                                                <li>Push back up to the starting position by extending your arms.</li>
                                                <li>Keep your core engaged throughout the movement.</li>
                                            </ol>
                                            <p><strong>Verified By:</strong> Lisa Rodriguez (Fitness Safety Expert)</p>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr data-exercise-id="3">
                                <td>
                                    <div class="exercise-info">
                                        
                                        <div>Treadmill Running <span class="verified-badge">Verified</span></div>
                                    </div>
                                </td>
                                <td>
                                    <div class="category-tags">
                                        <span class="category-tag">Cardio</span>
                                    </div>
                                </td>
                                <td>Legs, Heart, Lungs</td>
                                <td>
                                    <div class="difficulty-indicator">
                                        <div class="difficulty-dot dot-filled"></div>
                                        <div class="difficulty-dot dot-filled"></div>
                                        <div class="difficulty-dot dot-filled"></div>
                                        <div class="difficulty-dot dot-empty"></div>
                                        <div class="difficulty-dot dot-empty"></div>
                                    </div>
                                </td>
                                <td>
                                    <div class="popularity-bar">
                                        <div class="popularity-fill high-popularity" style="width: 90%"></div>
                                    </div>
                                    <span>7,125 uses</span>
                                </td>
                                <td><span class="status active">Active</span></td>
                                <td>
                                    <button class="action-btn view-details">View</button>
                                    <button class="action-btn">Edit</button>
                                </td>
                            </tr>
                            <tr data-exercise-id="4">
                                <td>
                                    <div class="exercise-info">
                                        
                                        <div>Kettlebell Swings <span class="verified-badge">Verified</span> <span class="trending-badge">Trending</span></div>
                                    </div>
                                </td>
                                <td>
                                    <div class="category-tags">
                                        <span class="category-tag">Strength</span>
                                        <span class="category-tag">Cardio</span>
                                    </div>
                                </td>
                                <td>Glutes, Hamstrings, Lower Back, Shoulders</td>
                                <td>
                                    <div class="difficulty-indicator">
                                        <div class="difficulty-dot dot-filled"></div>
                                        <div class="difficulty-dot dot-filled"></div>
                                        <div class="difficulty-dot dot-filled"></div>
                                        <div class="difficulty-dot dot-empty"></div>
                                        <div class="difficulty-dot dot-empty"></div>
                                    </div>
                                </td>
                                <td>
                                    <div class="popularity-bar">
                                        <div class="popularity-fill medium-popularity" style="width: 85%"></div>
                                    </div>
                                    <span>6,580 uses</span>
                                </td>
                                <td><span class="status active">Active</span></td>
                                <td>
                                    <button class="action-btn view-details">View</button>
                                    <button class="action-btn">Edit</button>
                                </td>
                            </tr>
                            <tr data-exercise-id="5">
                                <td>
                                    <div class="exercise-info">
                                        
                                        <div>Downward Dog <span class="verified-badge">Verified</span></div>
                                    </div>
                                </td>
                                <td>
                                    <div class="category-tags">
                                        <span class="category-tag">Flexibility</span>
                                        <span class="category-tag">Yoga</span>
                                    </div>
                                </td>
                                <td>Shoulders, Hamstrings, Calves, Arms</td>
                                <td>
                                    <div class="difficulty-indicator">
                                        <div class="difficulty-dot dot-filled"></div>
                                        <div class="difficulty-dot dot-filled"></div>
                                        <div class="difficulty-dot dot-empty"></div>
                                        <div class="difficulty-dot dot-empty"></div>
                                        <div class="difficulty-dot dot-empty"></div>
                                    </div>
                                </td>
                                <td>
                                    <div class="popularity-bar">
                                        <div class="popularity-fill medium-popularity" style="width: 78%"></div>
                                    </div>
                                    <span>6,125 uses</span>
                                </td>
                                <td><span class="status active">Active</span></td>
                                <td>
                                    <button class="action-btn view-details">View</button>
                                    <button class="action-btn">Edit</button>
                                </td>
                            </tr>
                            <tr data-exercise-id="6">
                                <td>
                                    <div class="exercise-info">
                                        
                                        <div>Dumbbell Rows <span class="verified-badge">Verified</span></div>
                                    </div>
                                </td>
                                <td>
                                    <div class="category-tags">
                                        <span class="category-tag">Strength</span>
                                    </div>
                                </td>
                                <td>Back, Biceps, Shoulders</td>
                                <td>
                                    <div class="difficulty-indicator">
                                        <div class="difficulty-dot dot-filled"></div>
                                        <div class="difficulty-dot dot-filled"></div>
                                        <div class="difficulty-dot dot-empty"></div>
                                        <div class="difficulty-dot dot-empty"></div>
                                        <div class="difficulty-dot dot-empty"></div>
                                    </div>
                                </td>
                                <td>
                                    <div class="popularity-bar">
                                        <div class="popularity-fill medium-popularity" style="width: 75%"></div>
                                    </div>
                                    <span>5,980 uses</span>
                                </td>
                                <td><span class="status active">Active</span></td>
                                <td>
                                    <button class="action-btn view-details">View</button>
                                    <button class="action-btn">Edit</button>
                                </td>
                            </tr>
                            <tr data-exercise-id="7">
                                <td>
                                    <div class="exercise-info">
                                        
                                        <div>Plank <span class="verified-badge">Verified</span></div>
                                    </div>
                                </td>
                                <td>
                                    <div class="category-tags">
                                        <span class="category-tag">Strength</span>
                                        <span class="category-tag">Bodyweight</span>
                                    </div>
                                </td>
                                <td>Core, Shoulders, Back</td>
                                <td>
                                    <div class="difficulty-indicator">
                                        <div class="difficulty-dot dot-filled"></div>
                                        <div class="difficulty-dot dot-filled"></div>
                                        <div class="difficulty-dot dot-empty"></div>
                                        <div class="difficulty-dot dot-empty"></div>
                                        <div class="difficulty-dot dot-empty"></div>
                                    </div>
                                </td>
                                <td>
                                    <div class="popularity-bar">
                                        <div class="popularity-fill medium-popularity" style="width: 72%"></div>
                                    </div>
                                    <span>5,750 uses</span>
                                </td>
                                <td><span class="status active">Active</span></td>
                                <td>
                                    <button class="action-btn view-details">View</button>
                                    <button class="action-btn">Edit</button>
                                </td>
                            </tr>
                            <tr data-exercise-id="8">
                                <td>
                                    <div class="exercise-info">
                                        
                                        <div>Bicycle Crunches</div>
                                    </div>
                                </td>
                                <td>
                                    <div class="category-tags">
                                        <span class="category-tag">Strength</span>
                                        <span class="category-tag">Bodyweight</span>
                                    </div>
                                </td>
                                <td>Abs, Obliques</td>
                                <td>
                                    <div class="difficulty-indicator">
                                        <div class="difficulty-dot dot-filled"></div>
                                        <div class="difficulty-dot dot-filled"></div>
                                        <div class="difficulty-dot dot-filled"></div>
                                        <div class="difficulty-dot dot-empty"></div>
                                        <div class="difficulty-dot dot-empty"></div>
                                    </div>
                                </td>
                                <td>
                                    <div class="popularity-bar">
                                        <div class="popularity-fill low-popularity" style="width: 60%"></div>
                                    </div>
                                    <span>4,825 uses</span>
                                </td>
                                <td><span class="status pending">Unverified</span></td>
                                <td>
                                    <button class="action-btn view-details">View</button>
                                    <button class="action-btn">Edit</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Pagination -->
                <div class="pagination">
                    <button class="page-btn active">1</button>
                    <button class="page-btn">2</button>
                    <button class="page-btn">3</button>
                    <button class="page-btn">Next</button>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Exercise Modal -->
    <div class="form-modal" id="exerciseFormModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Exercise</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="exerciseForm">
                <div class="form-group">
                    <label for="exerciseName">Exercise Name*</label>
                    <input type="text" id="exerciseName" name="exerciseName" required>
                </div>
                <div class="form-group">
                    <label for="exerciseCategory">Category*</label>
                    <select id="exerciseCategory" name="exerciseCategory" required>
                        <option value="">Select Category</option>
                        <option value="strength">Strength</option>
                        <option value="cardio">Cardio</option>
                        <option value="flexibility">Flexibility</option>
                        <option value="balance">Balance</option>
                        <option value="bodyweight">Bodyweight</option>
                        <option value="yoga">Yoga</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="exerciseMuscles">Muscle Groups*</label>
                    <input type="text" id="exerciseMuscles" name="exerciseMuscles" required placeholder="Primary muscle groups targeted, separated by commas">
                </div>
                <div class="form-group">
                    <label for="exerciseDifficulty">Difficulty Level*</label>
                    <select id="exerciseDifficulty" name="exerciseDifficulty" required>
                        <option value="">Select Difficulty</option>
                        <option value="1">Beginner (1/5)</option>
                        <option value="2">Easy (2/5)</option>
                        <option value="3">Intermediate (3/5)</option>
                        <option value="4">Advanced (4/5)</option>
                        <option value="5">Expert (5/5)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="exerciseEquipment">Equipment Required</label>
                    <input type="text" id="exerciseEquipment" name="exerciseEquipment" placeholder="List equipment needed, or 'None' for bodyweight exercises">
                </div>
                <div class="form-group">
                    <label for="exerciseDescription">Description*</label>
                    <textarea id="exerciseDescription" name="exerciseDescription" required placeholder="Brief description of the exercise and its benefits"></textarea>
                </div>
                <div class="form-group">
                    <label for="exerciseInstructions">Instructions*</label>
                    <textarea id="exerciseInstructions" name="exerciseInstructions" required placeholder="Step-by-step instructions for performing the exercise correctly"></textarea>
                </div>
                <div class="form-group">
                    <label for="exerciseImage">Image URL</label>
                    <input type="text" id="exerciseImage" name="exerciseImage" placeholder="URL to an image demonstrating the exercise">
                </div>
                <div class="form-actions">
                    <button type="button" class="cancel-btn">Cancel</button>
                    <button type="submit" class="submit-btn">Add Exercise</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
    // Setup interactive elements
    setupResponsiveFeatures();
    setupTabNavigation();
    setupSearchFunctionality();
    setupDetailsToggle();
    setupModalFunctionality();
    initializeCharts();
});

function setupResponsiveFeatures() {
    // Navigation buttons
    const navItems = document.querySelectorAll('.nav-link');
    
    navItems.forEach(item => {
        item.addEventListener('click', function(e) {
            const href = this.getAttribute('href');
            // Prevent default only for the current page to avoid redundant navigation
            if (href === '/admin_exercises') {
                e.preventDefault();
                navItems.forEach(link => link.classList.remove('active'));
                this.classList.add('active');
            }
            // Allow navigation for all other hrefs
        });
    });

    // Action buttons
    const actionButtons = document.querySelectorAll('.action-btn');
    actionButtons.forEach(button => {
        button.addEventListener('click', function() {
            this.classList.add('clicked');
            setTimeout(() => {
                this.classList.remove('clicked');
            }, 200);

            // Handle actions for specific buttons
            if (!this.classList.contains('view-details')) {
                if (this.textContent.trim() === 'Edit') {
                    alert('Edit exercise form would appear here');
                }
            }
        });
    });

    // Filter button
    const filterBtn = document.getElementById('filterBtn');
    if (filterBtn) {
        filterBtn.addEventListener('click', function() {
            alert('Filter options would appear here');
        });
    }

    // Pagination buttons
    const pageButtons = document.querySelectorAll('.page-btn');
    pageButtons.forEach(button => {
        button.addEventListener('click', function() {
            pageButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
        });
    });

    // Add New Exercise button
    const addExerciseBtn = document.getElementById('addExerciseBtn');
    if (addExerciseBtn) {
        addExerciseBtn.addEventListener('click', function() {
            document.getElementById('exerciseFormModal').style.display = 'flex';
        });
    }
}

function setupTabNavigation() {
    const tabs = document.querySelectorAll('.tab');
    const exerciseRows = document.querySelectorAll('#exerciseTableBody tr:not(.detail-row)');
    
    tabs.forEach(tab => {
        tab.addEventListener('click', function() {
            // Update active tab
            tabs.forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            
            const tabType = this.getAttribute('data-tab');
            
            // Filter exercises based on tab
            exerciseRows.forEach(row => {
                // Close any open details
                const rowId = row.getAttribute('data-exercise-id');
                if (rowId) {
                    const detailRow = document.getElementById('details-' + rowId);
                    if (detailRow) {
                        detailRow.style.display = 'none';
                    }
                }

                const categoryCell = row.querySelector('.category-tags');
                const trendingBadge = row.querySelector('.trending-badge');
                const statusCell = row.querySelector('.status');
                
                switch(tabType) {
                    case 'all':
                        row.style.display = '';
                        break;
                    case 'strength':
                    case 'cardio':
                    case 'flexibility':
                    case 'balance':
                        if (categoryCell && categoryCell.textContent.toLowerCase().includes(tabType)) {
                            row.style.display = '';
                        } else {
                            row.style.display = 'none';
                        }
                        break;
                    case 'trending':
                        if (trendingBadge) {
                            row.style.display = '';
                        } else {
                            row.style.display = 'none';
                        }
                        break;
                    case 'unverified':
                        if (statusCell && statusCell.classList.contains('pending')) {
                            row.style.display = '';
                        } else {
                            row.style.display = 'none';
                        }
                        break;
                }
            });
        });
    });
}

function setupSearchFunctionality() {
    const searchInput = document.getElementById('exerciseSearchInput');
    const exerciseRows = document.querySelectorAll('#exerciseTableBody tr:not(.detail-row)');
    
    if (searchInput) {
        searchInput.addEventListener('keyup', function() {
            const searchTerm = this.value.toLowerCase();
            
            exerciseRows.forEach(row => {
                // Close any open details
                const rowId = row.getAttribute('data-exercise-id');
                if (rowId) {
                    const detailRow = document.getElementById('details-' + rowId);
                    if (detailRow) {
                        detailRow.style.display = 'none';
                    }
                }

                const exerciseName = row.querySelector('.exercise-info div:nth-child(2)').textContent.toLowerCase();
                const category = row.querySelectorAll('td')[1].textContent.toLowerCase();
                const muscles = row.querySelectorAll('td')[2].textContent.toLowerCase();
                
                if (exerciseName.includes(searchTerm) || category.includes(searchTerm) || muscles.includes(searchTerm)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        });
    }
}

function setupDetailsToggle() {
    const viewDetailsButtons = document.querySelectorAll('.view-details');
    
    viewDetailsButtons.forEach(button => {
        button.addEventListener('click', function() {
            const row = this.closest('tr');
            const exerciseId = row.getAttribute('data-exercise-id');
            const detailRow = document.getElementById('details-' + exerciseId);
            
            // Close all other detail rows
            document.querySelectorAll('.detail-row').forEach(row => {
                if (row !== detailRow) {
                    row.style.display = 'none';
                }
            });
            
            // Toggle the clicked detail row
            if (detailRow) {
                detailRow.style.display = detailRow.style.display === 'none' ? 'table-row' : 'none';
            }
        });
    });
}

function setupModalFunctionality() {
    const modal = document.getElementById('exerciseFormModal');
    const closeBtn = document.querySelector('.close-modal');
    const cancelBtn = document.querySelector('.cancel-btn');
    const form = document.getElementById('exerciseForm');
    
    // Close the modal
    function closeModal() {
        modal.style.display = 'none';
        form.reset();
    }
    
    // Close on X button click
    if (closeBtn) {
        closeBtn.addEventListener('click', closeModal);
    }
    
    // Close on Cancel button click
    if (cancelBtn) {
        cancelBtn.addEventListener('click', closeModal);
    }
    
    // Close on click outside
    window.addEventListener('click', function(event) {
        if (event.target === modal) {
            closeModal();
        }
    });
    
    // Form submission
    if (form) {
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Exercise added successfully!');
            closeModal();
            // In a real implementation, this would call an API to add the exercise to the database
        });
    }
}

function initializeCharts() {
    // Popular Exercises Chart
    const popularCtx = document.getElementById('popularExercisesChart');
    if (popularCtx) {
        new Chart(popularCtx, {
            type: 'bar',
            data: {
                labels: ['Squats', 'Push-ups', 'Treadmill Running', 'Kettlebell Swings', 'Downward Dog'],
                datasets: [{
                    label: 'Usage Count',
                    data: [8245, 7890, 7125, 6580, 6125],
                    backgroundColor: [
                        '#FF6B6B',
                        '#FF6B6B',
                        '#FF6B6B',
                        '#FFC107',
                        '#FFC107'
                    ],
                    borderWidth: 1,
                    borderColor: '#1e1e1e'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            color: '#f1f1f1'
                        },
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        }
                    },
                    x: {
                        ticks: {
                            color: '#f1f1f1'
                        },
                        grid: {
                            display: false
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });
    }

    // Category Distribution Chart
    const categoryCtx = document.getElementById('categoryDistributionChart');
    if (categoryCtx) {
        new Chart(categoryCtx, {
            type: 'doughnut',
            data: {
                labels: ['Strength', 'Cardio', 'Flexibility', 'Balance', 'Yoga'],
                datasets: [{
                    data: [45, 25, 15, 10, 5],
                    backgroundColor: [
                        '#8A2BE2',
                        '#9370DB',
                        '#BA55D3',
                        '#DA70D6',
                        '#EE82EE'
                    ],
                    borderWidth: 1,
                    borderColor: '#1e1e1e'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'right',
                        labels: {
                            color: '#f1f1f1',
                            padding: 20,
                            font: {
                                size: 12
                            }
                        }
                    }
                }
            }
        });
    }

    // Exercise Trend Chart
    const trendCtx = document.getElementById('exerciseTrendChart');
    if (trendCtx) {
        new Chart(trendCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [
                    {
                        label: 'Kettlebell Swings',
                        data: [3200, 3400, 4100, 4800, 5700, 6580],
                        borderColor: '#FF6B6B',
                        backgroundColor: 'rgba(255, 107, 107, 0.1)',
                        tension: 0.3,
                        fill: true
                    },
                    {
                        label: 'Push-ups',
                        data: [6500, 6700, 7000, 7200, 7500, 7890],
                        borderColor: '#4CAF50',
                        backgroundColor: 'rgba(76, 175, 80, 0.1)',
                        tension: 0.3,
                        fill: true
                    },
                    {
                        label: 'Squats',
                        data: [7200, 7400, 7600, 7800, 8000, 8245],
                        borderColor: '#8A2BE2',
                        backgroundColor: 'rgba(138, 43, 226, 0.1)',
                        tension: 0.3,
                        fill: true
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            color: '#f1f1f1'
                        },
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        }
                    },
                    x: {
                        ticks: {
                            color: '#f1f1f1'
                        },
                        grid: {
                            display: false
                        }
                    }
                },
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            color: '#f1f1f1',
                            font: {
                                size: 12
                            }
                        }
                    }
                }
            }
        });
    }
}
    </script>
</body>
</html>