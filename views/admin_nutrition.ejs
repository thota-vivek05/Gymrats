<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GymRats - Nutrition Plans Management</title>
    <link rel="stylesheet" href="/admin/admin.css">
    <link rel="stylesheet" href="/admin/admin_nutrition.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap">
    
</head>
<body>
    <div class="container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="/home" class="brand-name">GymRats</a>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="admin_dashboard" class="nav-link ">
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="admin_user" class="nav-link">
                        <span>Users</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="admin_trainers" class="nav-link">
                        <span>Trainers</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="admin_membership" class="nav-link">
                        <span>Memberships</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="admin_nutrition" class="nav-link active">
                        <span>Nutrition Plans</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="admin_exercises" class="nav-link">
                        <span>Exercises</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="admin_workouts" class="nav-link">
                        <span>Workout Plans</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="admin_verifier" class="nav-link">
                        <span>Verifiers</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="admin_settings" class="nav-link">
                        <span>Settings</span>
                    </a>
                </li>
            </ul>
        </aside>
        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Header -->
            <div class="header">
                <h2>Nutrition Plans Management</h2>
                <div class="right-container">
                    <div class="search-container">
                        <img src="https://img.icons8.com/ios/250/8A2BE2/search--v1.png" height="18px" alt="Search Icon" />
                        <input type="text" placeholder="Search..." size="20" style="font-size: 14px;" />
                    </div>
                    <div class="user-info">
                        <div class="avatar">A</div>
                        <span>Admin</span>
                    </div>
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="stats-container">
                <div class="stats-card">
                    <div class="stats-content">
                        <div class="stats-info">
                            <div class="stats-header">
                                <h3>Total Plans</h3>
                            </div>
                            <div class="stats-number">156</div>
                            <div class="stats-label">+12 from last month</div>
                        </div>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="stats-content">
                        <div class="stats-info">
                            <div class="stats-header">
                                <h3>Most Popular</h3>
                            </div>
                            <div class="stats-number">Lean Bulk Plan</div>
                            <div class="stats-label">3,245 active users</div>
                        </div>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="stats-content">
                        <div class="stats-info">
                            <div class="stats-header">
                                <h3>Verified Plans</h3>
                            </div>
                            <div class="stats-number">132</div>
                            <div class="stats-label">85% of total</div>
                        </div>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="stats-content">
                        <div class="stats-info">
                            <div class="stats-header">
                                <h3>Active Subscribers</h3>
                            </div>
                            <div class="stats-number">8,752</div>
                            <div class="stats-label">+5% from last month</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="section">
                <div class="section-header">
                    <h3 class="section-title">Nutrition Plans Analytics</h3>
                </div>
                <div class="charts-grid">
                    <div class="chart-card">
                        <h4>Plan Type Distribution</h4>
                        <div class="chart-container">
                            <canvas id="planTypeChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <h4>Most Popular Plans</h4>
                        <div class="chart-container">
                            <canvas id="popularPlansChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Search Bar -->
            <div class="search-container">
                <div class="search-bar">
                    <input type="text" id="planSearchInput" placeholder="Search plans by name, type or target...">
                </div>
                <button class="filter-btn" id="filterBtn">Filter Options</button>
            </div>

            <!-- Tab Navigation -->
            <div class="tab-container">
                <button class="tab active" data-tab="all">All Plans</button>
                <button class="tab" data-tab="bulk">Bulking</button>
                <button class="tab" data-tab="cut">Cutting</button>
                <button class="tab" data-tab="maintain">Maintenance</button>
                <button class="tab" data-tab="specialty">Specialty Diets</button>
                <button class="tab" data-tab="popular">Most Popular</button>
                <button class="tab" data-tab="unverified">Unverified</button>
            </div>

            <!-- Nutrition Plans Cards View -->
            <div class="section">
                <div class="table-header">
                    <h3 class="section-title">Nutrition Plans</h3>
                    <button class="add-btn" id="addPlanBtn">+ Add New Plan</button>
                </div>

                <div class="plan-card-container" id="planCardsContainer">
                    <!-- Bulking Plan Card -->
                    <div class="plan-card" data-plan-id="1" data-plan-type="bulk">
                        <div class="plan-card-header">
                            <img src="https://images.unsplash.com/photo-1490645935967-10de6ba17061?q=80&w=1470&auto=format&fit=crop" alt="High Protein Bulking Plan">
                            <div class="plan-card-badges">
                                <span class="verified-badge">Verified</span>
                                <span class="popular-badge">Popular</span>
                            </div>
                        </div>
                        <div class="plan-card-body">
                            <div class="plan-card-title">
                                <span>High Protein Bulking Plan</span>
                            </div>
                            <div class="plan-type-container">
                                <span class="type-tag bulk-tag">Bulking</span>
                                <span class="type-tag">High Protein</span>
                            </div>
                            <p class="plan-card-description">A 7-day nutrition plan designed for serious muscle gains. High protein and balanced carbohydrates for optimal muscle growth.</p>
                            <div class="macros-summary">
                                <div class="macro-item">
                                    <div class="macro-label">Protein</div>
                                    <div class="macro-value protein">210g</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-label">Carbs</div>
                                    <div class="macro-value carbs">320g</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-label">Fat</div>
                                    <div class="macro-value fat">80g</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-label">Calories</div>
                                    <div class="macro-value calories">2,850</div>
                                </div>
                            </div>
                        </div>
                        <div class="plan-card-footer">
                            <div class="plan-card-author">By: Mark Johnson (Nutrition Expert)</div>
                            <div class="plan-card-actions">
                                <button class="plan-card-btn view-details-btn" data-plan-id="1">View Details</button>
                                <button class="plan-card-btn">Edit</button>
                            </div>
                        </div>
                    </div>

                    <!-- Cutting Plan Card -->
                    <div class="plan-card" data-plan-id="2" data-plan-type="cut">
                        <div class="plan-card-header">
                            <img src="https://images.unsplash.com/photo-1622444448012-05a5589286d7?q=80&w=1528&auto=format&fit=crop" alt="Fat Loss Cutting Plan">
                            <div class="plan-card-badges">
                                <span class="verified-badge">Verified</span>
                            </div>
                        </div>
                        <div class="plan-card-body">
                            <div class="plan-card-title">
                                <span>Fat Loss Cutting Plan</span>
                            </div>
                            <div class="plan-type-container">
                                <span class="type-tag cut-tag">Cutting</span>
                                <span class="type-tag">Low Carb</span>
                            </div>
                            <p class="plan-card-description">A 7-day calorie-restricted plan designed for maximum fat loss while preserving lean muscle. Focuses on high protein, moderate fats, and strategic carb timing.</p>
                            <div class="macros-summary">
                                <div class="macro-item">
                                    <div class="macro-label">Protein</div>
                                    <div class="macro-value protein">180g</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-label">Carbs</div>
                                    <div class="macro-value carbs">150g</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-label">Fat</div>
                                    <div class="macro-value fat">65g</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-label">Calories</div>
                                    <div class="macro-value calories">1,900</div>
                                </div>
                            </div>
                        </div>
                        <div class="plan-card-footer">
                            <div class="plan-card-author">By: Emily Williams (Nutrition Science)</div>
                            <div class="plan-card-actions">
                                <button class="plan-card-btn view-details-btn" data-plan-id="2">View Details</button>
                                <button class="plan-card-btn">Edit</button>
                            </div>
                        </div>
                    </div>

                    <!-- Maintenance Plan Card -->
                    <div class="plan-card" data-plan-id="3" data-plan-type="maintain">
                        <div class="plan-card-header">
                            <img src="https://images.unsplash.com/photo-1494390248081-4e521a5940db?q=80&w=1528&auto=format&fit=crop" alt="Balanced Maintenance Plan">
                            <div class="plan-card-badges">
                                <span class="verified-badge">Verified</span>
                                <span class="popular-badge">Popular</span>
                            </div>
                        </div>
                        <div class="plan-card-body">
                            <div class="plan-card-title">
                                <span>Balanced Maintenance Plan</span>
                            </div>
                            <div class="plan-type-container">
                                <span class="type-tag maintenance-tag">Maintenance</span>
                                <span class="type-tag">Balanced</span>
                            </div>
                            <p class="plan-card-description">A 7-day well-balanced nutrition plan for maintaining current physique. Perfect for after cutting or bulking phases when you want to stabilize your body composition.</p>
                            <div class="macros-summary">
                                <div class="macro-item">
                                    <div class="macro-label">Protein</div>
                                    <div class="macro-value protein">160g</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-label">Carbs</div>
                                    <div class="macro-value carbs">220g</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-label">Fat</div>
                                    <div class="macro-value fat">70g</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-label">Calories</div>
                                    <div class="macro-value calories">2,150</div>
                                </div>
                            </div>
                        </div>
                        <div class="plan-card-footer">
                            <div class="plan-card-author">By: Sarah Thompson (Registered Dietitian)</div>
                            <div class="plan-card-actions">
                                <button class="plan-card-btn view-details-btn" data-plan-id="3">View Details</button>
                                <button class="plan-card-btn">Edit</button>
                            </div>
                        </div>
                    </div>

                    <!-- Specialty Diet Plan Card -->
                    <div class="plan-card" data-plan-id="4" data-plan-type="specialty">
                        <div class="plan-card-header">
                            <img src="https://images.unsplash.com/photo-1610832958506-aa56368176cf?q=80&w=1470&auto=format&fit=crop" alt="Vegetarian Muscle Building">
                            <div class="plan-card-badges">
                                <span class="verified-badge">Verified</span>
                            </div>
                        </div>
                        <div class="plan-card-body">
                            <div class="plan-card-title">
                                <span>Vegetarian Muscle Building</span>
                            </div>
                            <div class="plan-type-container">
                                <span class="type-tag bulk-tag">Bulking</span>
                                <span class="type-tag">Vegetarian</span>
                            </div>
                            <p class="plan-card-description">A 7-day vegetarian plan designed for muscle growth. Focuses on plant-based proteins, complex carbohydrates, and healthy fats to support lean mass gains without meat.</p>
                            <div class="macros-summary">
                                <div class="macro-item">
                                    <div class="macro-label">Protein</div>
                                    <div class="macro-value protein">180g</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-label">Carbs</div>
                                    <div class="macro-value carbs">280g</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-label">Fat</div>
                                    <div class="macro-value fat">75g</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-label">Calories</div>
                                    <div class="macro-value calories">2,520</div>
                                </div>
                            </div>
                        </div>
                        <div class="plan-card-footer">
                            <div class="plan-card-author">By: Lisa Rodriguez (Plant-based Nutrition)</div>
                            <div class="plan-card-actions">
                                <button class="plan-card-btn view-details-btn" data-plan-id="4">View Details</button>
                                <button class="plan-card-btn">Edit</button>
                            </div>
                        </div>
                    </div>

                    <!-- Low Carb Cutting Plan Card -->
                    <div class="plan-card" data-plan-id="5" data-plan-type="cut">
                        <div class="plan-card-header">
                            <img src="https://images.unsplash.com/photo-1564834724105-918b73d1b9e0?q=80&w=1374&auto=format&fit=crop" alt="Keto-Inspired Cutting Plan">
                            <div class="plan-card-badges">
                                <span class="verified-badge">Verified</span>
                            </div>
                        </div>
                        <div class="plan-card-body">
                            <div class="plan-card-title">
                                <span>Keto-Inspired Cutting Plan</span>
                            </div>
                            <div class="plan-type-container">
                                <span class="type-tag cut-tag">Cutting</span>
                                <span class="type-tag">Low Carb</span>
                            </div>
                            <p class="plan-card-description">A 7-day low-carb plan inspired by ketogenic principles. Designed for rapid fat loss while maintaining muscle mass through higher fat intake and strategic protein timing.</p>
                            <div class="macros-summary">
                                <div class="macro-item">
                                    <div class="macro-label">Protein</div>
                                    <div class="macro-value protein">160g</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-label">Carbs</div>
                                    <div class="macro-value carbs">50g</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-label">Fat</div>
                                    <div class="macro-value fat">130g</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-label">Calories</div>
                                    <div class="macro-value calories">2,010</div>
                                </div>
                            </div>
                        </div>
                        <div class="plan-card-footer">
                            <div class="plan-card-author">By: Michael Davis (Sports Nutrition)</div>
                            <div class="plan-card-actions">
                                <button class="plan-card-btn view-details-btn" data-plan-id="5">View Details</button>
                                <button class="plan-card-btn">Edit</button>
                            </div>
                        </div>
                    </div>

                    <!-- Lean Bulk Plan Card -->
                    <div class="plan-card" data-plan-id="6" data-plan-type="bulk">
                        <div class="plan-card-header">
                            <img src="https://images.unsplash.com/photo-1606756790138-261d2b21cd75?q=80&w=1374&auto=format&fit=crop" alt="Lean Bulk Plan">
                            <div class="plan-card-badges">
                                <span class="verified-badge">Verified</span>
                                <span class="popular-badge">Popular</span>
                            </div>
                        </div>
                        <div class="plan-card-body">
                            <div class="plan-card-title">
                                <span>Lean Bulk Plan</span>
                            </div>
                            <div class="plan-type-container">
                                <span class="type-tag bulk-tag">Bulking</span>
                                <span class="type-tag">Clean Eating</span>
                            </div>
                            <p class="plan-card-description">A 7-day plan for adding muscle with minimal fat gain. Features a moderate calorie surplus with emphasis on clean, nutrient-dense foods and optimal protein distribution.</p>
                            <div class="macros-summary">
                                <div class="macro-item">
                                    <div class="macro-label">Protein</div>
                                    <div class="macro-value protein">200g</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-label">Carbs</div>
                                    <div class="macro-value carbs">300g</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-label">Fat</div>
                                    <div class="macro-value fat">70g</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-label">Calories</div>
                                    <div class="macro-value calories">2,630</div>
                                </div>
                            </div>
                        </div>
                        <div class="plan-card-footer">
                            <div class="plan-card-author">By: Alex Turner (Bodybuilding Nutrition)</div>
                            <div class="plan-card-actions">
                                <button class="plan-card-btn view-details-btn" data-plan-id="6">View Details</button>
                                <button class="plan-card-btn">Edit</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Pagination -->
                <div class="pagination">
                    <button class="page-btn active">1</button>
                    <button class="page-btn">2</button>
                    <button class="page-btn">3</button>
                    <button class="page-btn">Next</button>
                </div>
            </div>
        </main>
    </div>

    <!-- Plan Details Modal -->
    <div class="form-modal" id="planDetailsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="planDetailsTitle">High Protein Bulking Plan</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div id="planDetailsContent">
                <div class="plan-details">
                    <div class="type-tags" id="planDetailsTags">
                        <span class="type-tag bulk-tag">Bulking</span>
                        <span class="type-tag">High Protein</span>
                    </div>
                    
                    <p id="planDetailsDescription">A 7-day nutrition plan designed for serious muscle gains. High protein and balanced carbohydrates for optimal muscle growth.</p>
                    
                    <div class="macros-summary">
                        <div class="macro-item">
                            <div class="macro-label">Protein</div>
                            <div class="macro-value protein" id="planDetailsProtein">210g</div>
                        </div>
                        <div class="macro-item">
                            <div class="macro-label">Carbs</div>
                            <div class="macro-value carbs" id="planDetailsCarbs">320g</div>
                        </div>
                        <div class="macro-item">
                            <div class="macro-label">Fat</div>
                            <div class="macro-value fat" id="planDetailsFat">80g</div>
                        </div>
                        <div class="macro-item">
                            <div class="macro-label">Calories</div>
                            <div class="macro-value calories" id="planDetailsCalories">2,850</div>
                        </div>
                    </div>
                    
                    <div class="meal-plan-tabs">
                        <button class="meal-plan-tab active" data-day="1">Day 1</button>
                        <button class="meal-plan-tab" data-day="2">Day 2</button>
                        <button class="meal-plan-tab" data-day="3">Day 3</button>
                        <button class="meal-plan-tab" data-day="4">Day 4</button>
                        <button class="meal-plan-tab" data-day="5">Day 5</button>
                        <button class="meal-plan-tab" data-day="6">Day 6</button>
                        <button class="meal-plan-tab" data-day="7">Day 7</button>
                    </div>
                    
                    <div class="meal-plan-content active" data-day="1">
                        <h4>Day 1 Meal Plan</h4>
                        <table class="meal-table">
                            <thead>
                                <tr>
                                    <th>Meal</th>
                                    <th>Foods</th>
                                    <th>Protein</th>
                                    <th>Carbs</th>
                                    <th>Fat</th>
                                    <th>Calories</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <img src="https://img.icons8.com/ios/250/8A2BE2/sunrise.png" class="meal-type-icon" alt="Breakfast">
                                        Breakfast
                                    </td>
                                    <td>5 egg whites, 2 whole eggs, 1 cup oatmeal, 1 banana, 1 tbsp honey</td>
                                    <td>40g</td>
                                    <td>60g</td>
                                    <td>15g</td>
                                    <td>535</td>
                                </tr>
                                <tr>
                                    <td>
                                        <img src="https://img.icons8.com/ios/250/8A2BE2/snack.png" class="meal-type-icon" alt="Snack">
                                        Mid-Morning
                                    </td>
                                    <td>Protein shake with 1 scoop whey, 1 cup berries, 1 tbsp almond butter</td>
                                    <td>30g</td>
                                    <td>20g</td>
                                    <td>10g</td>
                                    <td>290</td>
                                </tr>
                                <tr>
                                    <td>
                                        <img src="https://img.icons8.com/ios/250/8A2BE2/sunny-side-up.png" class="meal-type-icon" alt="Lunch">
                                        Lunch
                                    </td>
                                    <td>8oz chicken breast, 1 cup brown rice, 1 cup broccoli, 1 tbsp olive oil</td>
                                    <td>55g</td>
                                    <td>45g</td>
                                    <td>15g</td>
                                    <td>535</td>
                                </tr>
                                <tr>
                                    <td>
                                        <img src="https://img.icons8.com/ios/250/8A2BE2/snack.png" class="meal-type-icon" alt="Snack">
                                        Afternoon
                                    </td>
                                    <td>1 cup Greek yogurt, 1/4 cup granola, 1 tbsp honey</td>
                                    <td>25g</td>
                                    <td>30g</td>
                                    <td>5g</td>
                                    <td>265</td>
                                </tr>
                                <tr>
                                    <td>
                                        <img src="https://img.icons8.com/ios/250/8A2BE2/dinner.png" class="meal-type-icon" alt="Dinner">
                                        Dinner
                                    </td>
                                    <td>8oz salmon, 1 large sweet potato, 2 cups mixed vegetables, 1 tbsp olive oil</td>
                                    <td>45g</td>
                                    <td>50g</td>
                                    <td>25g</td>
                                    <td>605</td>
                                </tr>
                                <tr>
                                    <td>
                                        <img src="https://img.icons8.com/ios/250/8A2BE2/night.png" class="meal-type-icon" alt="Before Bed">
                                        Before Bed
                                    </td>
                                    <td>1 cup cottage cheese, 1 tbsp almond butter, 1/4 cup berries</td>
                                    <td>28g</td>
                                    <td>10g</td>
                                    <td>10g</td>
                                    <td>240</td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="2"><strong>Daily Totals</strong></td>
                                    <td><strong>223g</strong></td>
                                    <td><strong>215g</strong></td>
                                    <td><strong>80g</strong></td>
                                    <td><strong>2,470</strong></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    
                    <div class="meal-plan-content" data-day="2">
                        <h4>Day 2 Meal Plan</h4>
                        <p>Detailed meal plan for Day 2 would appear here...</p>
                    </div>
                    
                    <div class="meal-plan-content" data-day="3">
                        <h4>Day 3 Meal Plan</h4>
                        <p>Detailed meal plan for Day 3 would appear here...</p>
                    </div>
                    
                    <div class="meal-plan-content" data-day="4">
                        <h4>Day 4 Meal Plan</h4>
                        <p>Detailed meal plan for Day 4 would appear here...</p>
                    </div>
                    
                    <div class="meal-plan-content" data-day="5">
                        <h4>Day 5 Meal Plan</h4>
                        <p>Detailed meal plan for Day 5 would appear here...</p>
                    </div>
                    
                    <div class="meal-plan-content" data-day="6">
                        <h4>Day 6 Meal Plan</h4>
                        <p>Detailed meal plan for Day 6 would appear here...</p>
                    </div>
                    
                    <div class="meal-plan-content" data-day="7">
                        <h4>Day 7 Meal Plan</h4>
                        <p>Detailed meal plan for Day 7 would appear here...</p>
                    </div>
                    
                    <h4>Notes</h4>
                    <p>- Drink at least 3-4 liters of water daily<br>
                    - Time meals around workouts for optimal results<br>
                    - Adjust portions based on individual caloric needs<br>
                    - For best results, follow the plan for at least 8 weeks</p>
                    
                    <div class="form-actions">
                        <button class="cancel-btn close-details">Close</button>
                        <button class="submit-btn edit-plan-btn">Edit Plan</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Plan Modal -->
    <div class="form-modal" id="addPlanModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="addPlanTitle">Add New Nutrition Plan</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="addPlanForm">
                <!-- Form Tabs -->
                <div class="form-tabs">
                    <button type="button" class="form-tab active" data-tab="basic-info">Basic Info</button>
                    <button type="button" class="form-tab" data-tab="meal-plan">Meal Plan</button>
                    <button type="button" class="form-tab" data-tab="notes">Notes & Guidelines</button>
                </div>
                
                <!-- Basic Info Tab -->
                <div class="tab-content active" data-tab="basic-info">
                    <div class="form-group">
                        <label for="planName">Plan Name*</label>
                        <input type="text" id="planName" name="planName" required>
                    </div>
                    <div class="form-group">
                        <label for="planType">Plan Type*</label>
                        <select id="planType" name="planType" required>
                            <option value="">Select Plan Type</option>
                            <option value="bulk">Bulking</option>
                            <option value="cut">Cutting</option>
                            <option value="maintain">Maintenance</option>
                            <option value="specialty">Specialty Diet</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="planSubtype">Plan Subtype</label>
                        <input type="text" id="planSubtype" name="planSubtype" placeholder="E.g., High Protein, Low Carb, Vegetarian, etc.">
                    </div>
                    <div class="form-group">
                        <label for="planDescription">Description*</label>
                        <textarea id="planDescription" name="planDescription" required placeholder="Describe the plan, its benefits, and target audience"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="planAuthor">Author/Creator*</label>
                        <input type="text" id="planAuthor" name="planAuthor" required>
                    </div>
                    <div class="form-group">
                        <label for="planCalories">Target Daily Calories*</label>
                        <input type="number" id="planCalories" name="planCalories" required>
                    </div>
                    <div class="form-group">
                        <label for="planProtein">Target Daily Protein (g)*</label>
                        <input type="number" id="planProtein" name="planProtein" required>
                    </div>
                    <div class="form-group">
                        <label for="planCarbs">Target Daily Carbs (g)*</label>
                        <input type="number" id="planCarbs" name="planCarbs" required>
                    </div>
                    <div class="form-group">
                        <label for="planFat">Target Daily Fat (g)*</label>
                        <input type="number" id="planFat" name="planFat" required>
                    </div>
                    <div class="form-group">
                        <label for="planImage">Plan Image URL</label>
                        <input type="text" id="planImage" name="planImage" placeholder="URL to an image representing the diet plan">
                    </div>
                </div>
                
                <!-- Meal Plan Tab -->
                <div class="tab-content" data-tab="meal-plan">
                    <h4>Day 1 Meal Plan</h4>
                    <div class="day-plan" id="day1-plan">
                        <h5 class="day-title">Breakfast</h5>
                        <div class="meal-row">
                            <div class="meal-inputs">
                                <input type="text" placeholder="Food items" name="day1-breakfast-foods">
                                <input type="number" placeholder="Protein (g)" name="day1-breakfast-protein">
                                <input type="number" placeholder="Carbs (g)" name="day1-breakfast-carbs">
                                <input type="number" placeholder="Fat (g)" name="day1-breakfast-fat">
                                <button type="button" class="delete-meal-btn">Remove</button>
                            </div>
                        </div>
                        <button type="button" class="add-meal-btn" data-meal="breakfast" data-day="1">+ Add Food Item</button>
                        
                        <h5 class="day-title">Lunch</h5>
                        <div class="meal-row">
                            <div class="meal-inputs">
                                <input type="text" placeholder="Food items" name="day1-lunch-foods">
                                <input type="number" placeholder="Protein (g)" name="day1-lunch-protein">
                                <input type="number" placeholder="Carbs (g)" name="day1-lunch-carbs">
                                <input type="number" placeholder="Fat (g)" name="day1-lunch-fat">
                                <button type="button" class="delete-meal-btn">Remove</button>
                            </div>
                        </div>
                        <button type="button" class="add-meal-btn" data-meal="lunch" data-day="1">+ Add Food Item</button>
                        
                        <h5 class="day-title">Dinner</h5>
                        <div class="meal-row">
                            <div class="meal-inputs">
                                <input type="text" placeholder="Food items" name="day1-dinner-foods">
                                <input type="number" placeholder="Protein (g)" name="day1-dinner-protein">
                                <input type="number" placeholder="Carbs (g)" name="day1-dinner-carbs">
                                <input type="number" placeholder="Fat (g)" name="day1-dinner-fat">
                                <button type="button" class="delete-meal-btn">Remove</button>
                            </div>
                        </div>
                        <button type="button" class="add-meal-btn" data-meal="dinner" data-day="1">+ Add Food Item</button>
                        
                        <h5 class="day-title">Snacks</h5>
                        <div class="meal-row">
                            <div class="meal-inputs">
                                <input type="text" placeholder="Food items" name="day1-snack-foods">
                                <input type="number" placeholder="Protein (g)" name="day1-snack-protein">
                                <input type="number" placeholder="Carbs (g)" name="day1-snack-carbs">
                                <input type="number" placeholder="Fat (g)" name="day1-snack-fat">
                                <button type="button" class="delete-meal-btn">Remove</button>
                            </div>
                        </div>
                        <button type="button" class="add-meal-btn" data-meal="snack" data-day="1">+ Add Food Item</button>
                    </div>
                    
                    <p>Note: Additional days (2-7) would be added through JavaScript when user clicks "Add Another Day" button</p>
                    <button type="button" id="addDayBtn" class="filter-btn">+ Add Another Day</button>
                </div>
                
                <!-- Notes Tab -->
                <div class="tab-content" data-tab="notes">
                    <div class="form-group">
                        <label for="planGuidelines">Dietary Guidelines</label>
                        <textarea id="planGuidelines" name="planGuidelines" placeholder="General guidelines for following the plan"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="planRestrictions">Restrictions or Allergies</label>
                        <textarea id="planRestrictions" name="planRestrictions" placeholder="Any food restrictions this plan addresses"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="planSupplements">Recommended Supplements</label>
                        <textarea id="planSupplements" name="planSupplements" placeholder="Optional supplements to enhance the plan"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="planTiming">Meal Timing</label>
                        <textarea id="planTiming" name="planTiming" placeholder="Recommendations for when to eat each meal"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="planHydration">Hydration Guidelines</label>
                        <textarea id="planHydration" name="planHydration" placeholder="Water intake recommendations"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="planAdditionalNotes">Additional Notes</label>
                        <textarea id="planAdditionalNotes" name="planAdditionalNotes" placeholder="Any other important information"></textarea>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="cancel-btn">Cancel</button>
                    <button type="submit" class="submit-btn">Add Plan</button>
                </div>
            </form>
        </div>
    </div>

    <script>
       document.addEventListener('DOMContentLoaded', function() {
    // Setup interactive elements
    setupResponsiveFeatures();
    setupTabNavigation();
    setupSearchFunctionality();
    setupModalFunctionality();
    setupPlanDetailsView();
    initializeCharts();
});

function setupResponsiveFeatures() {
    // Navigation buttons
    const navItems = document.querySelectorAll('.nav-link');
    
    navItems.forEach(item => {
        item.addEventListener('click', function(e) {
            const href = this.getAttribute('href');
            // Prevent default only for the current page to avoid redundant navigation
            if (href === '/admin_nutrition') {
                e.preventDefault();
                navItems.forEach(link => link.classList.remove('active'));
                this.classList.add('active');
            }
            // Allow navigation for all other hrefs
        });
    });

    // Action buttons
    const actionButtons = document.querySelectorAll('.action-btn, .plan-card-btn');
    actionButtons.forEach(button => {
        if (!button.classList.contains('view-details-btn')) {
            button.addEventListener('click', function() {
                this.classList.add('clicked');
                setTimeout(() => {
                    this.classList.remove('clicked');
                }, 200);

                if (this.textContent.trim() === 'Edit') {
                    alert('Edit plan form would appear here');
                }
            });
        }
    });

    // Filter button
    const filterBtn = document.getElementById('filterBtn');
    if (filterBtn) {
        filterBtn.addEventListener('click', function() {
            alert('Filter options would appear here');
        });
    }

    // Pagination buttons
    const pageButtons = document.querySelectorAll('.page-btn');
    pageButtons.forEach(button => {
        button.addEventListener('click', function() {
            pageButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
        });
    });

    // Add New Plan button
    const addPlanBtn = document.getElementById('addPlanBtn');
    if (addPlanBtn) {
        addPlanBtn.addEventListener('click', function() {
            document.getElementById('addPlanModal').style.display = 'flex';
        });
    }
}

function setupTabNavigation() {
    // Main page tabs
    const tabs = document.querySelectorAll('.tab');
    const planCards = document.querySelectorAll('.plan-card');
    
    tabs.forEach(tab => {
        tab.addEventListener('click', function() {
            // Update active tab
            tabs.forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            
            const tabType = this.getAttribute('data-tab');
            
            // Filter plans based on tab
            planCards.forEach(card => {
                const planType = card.getAttribute('data-plan-type');
                const popularBadge = card.querySelector('.popular-badge');
                const verifiedBadge = card.querySelector('.verified-badge');
                
                switch(tabType) {
                    case 'all':
                        card.style.display = '';
                        break;
                    case 'bulk':
                    case 'cut':
                    case 'maintain':
                    case 'specialty':
                        if (planType === tabType) {
                            card.style.display = '';
                        } else {
                            card.style.display = 'none';
                        }
                        break;
                    case 'popular':
                        if (popularBadge) {
                            card.style.display = '';
                        } else {
                            card.style.display = 'none';
                        }
                        break;
                    case 'unverified':
                        if (!verifiedBadge) {
                            card.style.display = '';
                        } else {
                            card.style.display = 'none';
                        }
                        break;
                }
            });
        });
    });

    // Meal plan day tabs in plan details
    const mealPlanTabs = document.querySelectorAll('.meal-plan-tab');
    const mealPlanContents = document.querySelectorAll('.meal-plan-content');
    
    mealPlanTabs.forEach(tab => {
        tab.addEventListener('click', function() {
            // Update active tab
            mealPlanTabs.forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            
            const dayNum = this.getAttribute('data-day');
            
            // Show corresponding content
            mealPlanContents.forEach(content => {
                if (content.getAttribute('data-day') === dayNum) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
        });
    });

    // Form tabs in add/edit plan modal
    const formTabs = document.querySelectorAll('.form-tab');
    const tabContents = document.querySelectorAll('.tab-content');
    
    formTabs.forEach(tab => {
        tab.addEventListener('click', function() {
            // Update active tab
            formTabs.forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            
            const tabName = this.getAttribute('data-tab');
            
            // Show corresponding content
            tabContents.forEach(content => {
                if (content.getAttribute('data-tab') === tabName) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
        });
    });
}

function setupSearchFunctionality() {
    const searchInput = document.getElementById('planSearchInput');
    const planCards = document.querySelectorAll('.plan-card');
    
    if (searchInput) {
        searchInput.addEventListener('keyup', function() {
            const searchTerm = this.value.toLowerCase();
            
            planCards.forEach(card => {
                const planTitle = card.querySelector('.plan-card-title span').textContent.toLowerCase();
                const planDescription = card.querySelector('.plan-card-description').textContent.toLowerCase();
                const planType = card.querySelector('.plan-type-container').textContent.toLowerCase();
                
                if (planTitle.includes(searchTerm) || planDescription.includes(searchTerm) || planType.includes(searchTerm)) {
                    card.style.display = '';
                } else {
                    card.style.display = 'none';
                }
            });
        });
    }
}

function setupModalFunctionality() {
    // Setup add/edit plan modal
    const addPlanModal = document.getElementById('addPlanModal');
    const planDetailsModal = document.getElementById('planDetailsModal');
    const closeButtons = document.querySelectorAll('.close-modal, .cancel-btn');
    const addPlanForm = document.getElementById('addPlanForm');
    
    // Close modals
    function closeModals() {
        addPlanModal.style.display = 'none';
        planDetailsModal.style.display = 'none';
        if (addPlanForm) addPlanForm.reset();
    }
    
    // Close on X button or Cancel button click
    closeButtons.forEach(button => {
        button.addEventListener('click', closeModals);
    });
    
    // Close on click outside
    window.addEventListener('click', function(event) {
        if (event.target === addPlanModal || event.target === planDetailsModal) {
            closeModals();
        }
    });
    
    // Form submission
    if (addPlanForm) {
        addPlanForm.addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Nutrition plan added successfully!');
            closeModals();
            // In a real implementation, this would call an API to add the plan to the database
        });
    }

    // Add meal button functionality
    const addMealButtons = document.querySelectorAll('.add-meal-btn');
    addMealButtons.forEach(button => {
        button.addEventListener('click', function() {
            const meal = this.getAttribute('data-meal');
            const day = this.getAttribute('data-day');
            const mealRow = document.createElement('div');
            mealRow.className = 'meal-row';
            mealRow.innerHTML = `
                <div class="meal-inputs">
                    <input type="text" placeholder="Food items" name="day${day}-${meal}-foods">
                    <input type="number" placeholder="Protein (g)" name="day${day}-${meal}-protein">
                    <input type="number" placeholder="Carbs (g)" name="day${day}-${meal}-carbs">
                    <input type="number" placeholder="Fat (g)" name="day${day}-${meal}-fat">
                    <button type="button" class="delete-meal-btn">Remove</button>
                </div>
            `;
            
            // Insert before the add button
            this.parentNode.insertBefore(mealRow, this);
            
            // Add event listener to the new delete button
            const deleteButton = mealRow.querySelector('.delete-meal-btn');
            deleteButton.addEventListener('click', function() {
                this.closest('.meal-row').remove();
            });
        });
    });

    // Delete meal button functionality
    document.addEventListener('click', function(e) {
        if (e.target && e.target.classList.contains('delete-meal-btn')) {
            e.target.closest('.meal-row').remove();
        }
    });

    // Add another day button
    const addDayBtn = document.getElementById('addDayBtn');
    if (addDayBtn) {
        addDayBtn.addEventListener('click', function() {
            // This would add another day's meal plan template
            alert('Adding another day would duplicate the day template with incremented day number');
        });
    }
}

function setupPlanDetailsView() {
    const viewDetailsButtons = document.querySelectorAll('.view-details-btn');
    const planDetailsModal = document.getElementById('planDetailsModal');
    
    viewDetailsButtons.forEach(button => {
        button.addEventListener('click', function() {
            const planId = this.getAttribute('data-plan-id');
            
            // In a real implementation, this would fetch plan details from an API
            // For now, we'll just show the modal with sample data
            planDetailsModal.style.display = 'flex';
            
            // Sample data for different plans
            let planTitle, planType, planDescription, protein, carbs, fat, calories;
            
            switch(planId) {
                case '1':
                    planTitle = 'High Protein Bulking Plan';
                    planType = '<span class="type-tag bulk-tag">Bulking</span><span class="type-tag">High Protein</span>';
                    planDescription = 'A 7-day nutrition plan designed for serious muscle gains. High protein and balanced carbohydrates for optimal muscle growth.';
                    protein = '210g';
                    carbs = '320g';
                    fat = '80g';
                    calories = '2,850';
                    break;
                case '2':
                    planTitle = 'Fat Loss Cutting Plan';
                    planType = '<span class="type-tag cut-tag">Cutting</span><span class="type-tag">Low Carb</span>';
                    planDescription = 'A 7-day calorie-restricted plan designed for maximum fat loss while preserving lean muscle. Focuses on high protein, moderate fats, and strategic carb timing.';
                    protein = '180g';
                    carbs = '150g';
                    fat = '65g';
                    calories = '1,900';
                    break;
                case '3':
                    planTitle = 'Balanced Maintenance Plan';
                    planType = '<span class="type-tag maintenance-tag">Maintenance</span><span class="type-tag">Balanced</span>';
                    planDescription = 'A 7-day well-balanced nutrition plan for maintaining current physique. Perfect for after cutting or bulking phases when you want to stabilize your body composition.';
                    protein = '160g';
                    carbs = '220g';
                    fat = '70g';
                    calories = '2,150';
                    break;
                case '4':
                    planTitle = 'Vegetarian Muscle Building';
                    planType = '<span class="type-tag bulk-tag">Bulking</span><span class="type-tag">Vegetarian</span>';
                    planDescription = 'A 7-day vegetarian plan designed for muscle growth. Focuses on plant-based proteins, complex carbohydrates, and healthy fats to support lean mass gains without meat.';
                    protein = '180g';
                    carbs = '280g';
                    fat = '75g';
                    calories = '2,520';
                    break;
                case '5':
                    planTitle = 'Keto-Inspired Cutting Plan';
                    planType = '<span class="type-tag cut-tag">Cutting</span><span class="type-tag">Low Carb</span>';
                    planDescription = 'A 7-day low-carb plan inspired by ketogenic principles. Designed for rapid fat loss while maintaining muscle mass through higher fat intake and strategic protein timing.';
                    protein = '160g';
                    carbs = '50g';
                    fat = '130g';
                    calories = '2,010';
                    break;
                case '6':
                    planTitle = 'Lean Bulk Plan';
                    planType = '<span class="type-tag bulk-tag">Bulking</span><span class="type-tag">Clean Eating</span>';
                    planDescription = 'A 7-day plan for adding muscle with minimal fat gain. Features a moderate calorie surplus with emphasis on clean, nutrient-dense foods and optimal protein distribution.';
                    protein = '200g';
                    carbs = '300g';
                    fat = '70g';
                    calories = '2,630';
                    break;
            }
            
            // Update modal content
            document.getElementById('planDetailsTitle').textContent = planTitle;
            document.getElementById('planDetailsTags').innerHTML = planType;
            document.getElementById('planDetailsDescription').textContent = planDescription;
            document.getElementById('planDetailsProtein').textContent = protein;
            document.getElementById('planDetailsCarbs').textContent = carbs;
            document.getElementById('planDetailsFat').textContent = fat;
            document.getElementById('planDetailsCalories').textContent = calories;
        });
    });
}

function initializeCharts() {
    // Plan Type Distribution Chart
    const planTypeCtx = document.getElementById('planTypeChart');
    if (planTypeCtx) {
        new Chart(planTypeCtx, {
            type: 'doughnut',
            data: {
                labels: ['Bulking', 'Cutting', 'Maintenance', 'Specialty'],
                datasets: [{
                    data: [45, 35, 15, 5],
                    backgroundColor: [
                        '#FFA500', // Orange for bulking
                        '#00BFFF', // Blue for cutting
                        '#32CD32', // Green for maintenance
                        '#8A2BE2'  // Purple for specialty
                    ],
                    borderWidth: 1,
                    borderColor: '#1e1e1e'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'right',
                        labels: {
                            color: '#f1f1f1',
                            padding: 20,
                            font: {
                                size: 12
                            }
                        }
                    }
                }
            }
        });
    }

    // Most Popular Plans Chart
    const popularPlansCtx = document.getElementById('popularPlansChart');
    if (popularPlansCtx) {
        new Chart(popularPlansCtx, {
            type: 'bar',
            data: {
                labels: ['Lean Bulk Plan', 'High Protein Bulking', 'Fat Loss Cutting', 'Balanced Maintenance', 'Keto-Inspired'],
                datasets: [{
                    label: 'Active Users',
                    data: [3245, 2890, 2450, 1920, 1745],
                    backgroundColor: [
                        '#FFA500',
                        '#FFA500',
                        '#00BFFF',
                        '#32CD32',
                        '#00BFFF'
                    ],
                    borderWidth: 1,
                    borderColor: '#1e1e1e'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            color: '#f1f1f1'
                        },
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        }
                    },
                    x: {
                        ticks: {
                            color: '#f1f1f1'
                        },
                        grid: {
                            display: false
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });
    }
}
    </script>
</body>
</html>